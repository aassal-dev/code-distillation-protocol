# Strategy Evaluation: The Codebase Distillation Protocol

**Version:** 0.1.0 **Status:** First Minor Release - In-Editor "Composer" Workflow.

## 1. Executive Summary

The protocol focuses on **Active Extraction** of engineering wisdom from high-quality open-source repositories. The goal is to distill "DNA" (patterns, tricks, decisions) into a **Universal Global Library** of atomic assets.

**Core Mechanism:** An **In-Editor Composer Protocol**. You run the entire workflow without leaving Cursor AI by pasting the Driver File into the Composer chat.

## 2. Ecosystem Context & "The Gap"

|   |   |   |
|---|---|---|
|**Format**|**Purpose**|**How We Leverage It**|
|**`.cursorrules`**|Global instructions for the Cursor AI editor.|**Output Target:** We generate snippets _for_ this file.|
|**`.mdc` (Claude)**|"Model Document Context" - triggers context loading.|**Deployment Strategy:** We save Atomic Patterns as `.mdc` files (e.g., `pattern-retry.mdc` triggers on networking code).|
|**`skill.md`**|Defines _tools_ an agent can run.|**Distinct:** Our library provides _wisdom_ (Brain), not just tools (Hands).|

## 3. The "Fractal Extraction" Methodology

To ensure we don't miss "Code-Level Optimizations," we define four layers of extraction:

1. **System Level:** Architecture, caching strategies, database choices.
    
2. **Module Level:** Design patterns (Factory, Observer), folder structure.
    
3. **Class/Function Level:** API design, error handling wrappers.
    
4. **Line Level (The "Metal"):** Bitwise hacks, loop unrolling, memory pointer tricks, specific regex optimizations.
    

## 4. The Orchestration Architecture

- **The Driver:** You paste `distillation_workflow.md` into Cursor Composer.
    
- **Step 1 (Auto-Survey):** Composer reads the file tree and generates a JSON plan (`_distillation/extraction_plan.json`).
    
- **Step 2 (The Atomizer):** Composer iterates through the JSON plan, creating atomic finding files.
    
- **Step 3 (The Librarian):** A final prompt merges findings into the Global Library.
    

## 5. Scoring

|   |   |   |
|---|---|---|
|**Metric**|**Score**|**Notes**|
|**Automation**|10/10|Zero context switching. The IDE is the runtime.|
|**Granularity**|10/10|Fractal Extraction covers everything from Arch to Bit-flipping.|
|**UX**|10/10|Single-file execution via Composer.|