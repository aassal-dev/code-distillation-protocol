# Strategy Evaluation: The Codebase Distillation Protocol

**Version:** 0.2.03

**Status:** In-Editor "Composer" Workflow with Top-Down Intent Layer.

## 1. Executive Summary

The protocol focuses on **Active Extraction** of engineering wisdom from high-quality open-source repositories. The goal is to distill "DNA" (patterns, tricks, decisions) into a **Universal Global Library** of atomic assets.

**Core Mechanism:** An **In-Editor Composer Protocol**. You run the entire workflow without leaving Cursor AI by pasting the Driver File into the Composer chat.

## 2. Ecosystem Context & "The Gap"

|                     |                                                      |                                                                              |
| ------------------- | ---------------------------------------------------- | ---------------------------------------------------------------------------- |
| **Format**          | **Purpose**                                          | **How We Leverage It**                                                       |
| **`.cursorrules`**  | Global instructions for the Cursor AI editor.        | **Output Target:** We generate snippets _for_ this file.                     |
| **`.mdc` (Claude)** | "Model Document Context" - triggers context loading. | **Deployment Strategy:** We save Atomic Patterns as `.mdc` files.            |
| **`skill.md`**      | Defines _tools_ an agent can run.                    | **Distinct:** Our library provides _wisdom_ (Brain), not just tools (Hands). |

## 3. The "Fractal Extraction" Methodology

Extraction happens across four layers:

1. **System Level:** Architecture, caching strategies, database choices.
    
2. **Module Level:** Design patterns (Factory, Observer), folder structure.
    
3. **Class/Function Level:** API design, error handling wrappers.
    
4. **Line Level (The "Metal"):** Bitwise hacks, loop unrolling, optimizations.
    

## 4. The Orchestration Architecture (Updated v0.2.03)

We have introduced an **Intent Layer** to prevent aimless scanning. The architecture is now a 4-step pipeline:

- **Step 1: The Director (Goal-Setter):** AI reads the `README.md`, docs, and your high-level theory. It defines _what_ the system should try to learn, producing `learning_objectives.md`.
    
- **Step 2: The Surveyor (Auto-Survey):** AI reads the file tree and `learning_objectives.md` to generate a targeted JSON plan (`extraction_plan.json`).
    
- **Step 3: The Atomizer:** AI iterates through the JSON plan, extracting specific code patterns that answer the Director's objectives.
    
- **Step 4: The Librarian:** A final prompt merges findings into the Global Library.
    

## 5. Scoring

|   |   |   |
|---|---|---|
|**Metric**|**Score**|**Notes**|
|**Automation**|10/10|Zero context switching. The IDE is the runtime.|
|**Precision**|10/10|The new "Director" layer prevents AI hallucination and wasted tokens by establishing top-down intent before bottom-up scanning.|
|**UX**|10/10|Single-file execution via Composer.|