# Strategy Evaluation: The Codebase Distillation Protocol

**Version:** 0.0.3

**Status:** Alpha - Multi-Agent Workflow Integrated.

## 1. Executive Summary

The protocol focuses on **Active Extraction** of engineering wisdom from high-quality open-source repositories. The goal is to distill "DNA" (patterns, tricks, decisions) into a **Universal Global Library** of atomic assets.

**New in v0.0.3:** We are moving from a linear manual process to a **Parallelized Multi-Agent Workflow**.

## 2. Ecosystem Context & "The Gap"

You asked about `skill.md`, `.mdc`, and `workflow.md`. Here is how this protocol fits:

|   |   |   |
|---|---|---|
|**Format**|**Purpose**|**How We Leverage It**|
|**`.cursorrules`**|Global instructions for the Cursor AI editor.|**Output Target:** We generate snippets _for_ this file.|
|**`.mdc` (Claude)**|"Model Document Context" - tells Claude _when_ to read specific docs.|**Deployment Strategy:** We should save our Atomic Patterns as `.mdc` files. Example: `pattern-retry.mdc` triggers only when Claude sees networking code.|
|**`skill.md`**|Defines _tools_ an agent can run (executables).|**Distinct:** Our library provides _wisdom_, not executable tools. We are building the "Brain", not the "Hands".|

## 3. The "Fractal Extraction" Methodology

To ensure we don't miss "Code-Level Optimizations," we define four layers of extraction:

1. **System Level:** Architecture, caching strategies, database choices.
    
2. **Module Level:** Design patterns (Factory, Observer), folder structure.
    
3. **Class/Function Level:** API design, error handling wrappers.
    
4. **Line Level (The "Metal"):** Bitwise hacks, loop unrolling, memory pointer tricks, specific regex optimizations.
    

## 4. The Orchestration Architecture

We are replacing the manual loop with a **Map-Reduce** style workflow (detailed in `distillation_workflow.md`):

- **Step 1 (The Surveyor):** Single Agent. Scans repo. **Output:** `extraction_targets.json`.
    
- **Step 2 (The Swarm):** Multiple Agents (Parallel). Each takes one entry from `extraction_targets.json`. **Output:** Raw `findings_*.md` files.
    
- **Step 3 (The Librarian):** Single Agent. Merges duplicates, adds "Why" context, and indexes into the Global Library.
    

## 5. Scoring (v0.0.3)

|   |   |   |
|---|---|---|
|**Metric**|**Score**|**Notes**|
|**Automation**|8/10|The new Workflow file makes this scriptable via CLI (Cursor/Claude).|
|**Granularity**|9.5/10|"Fractal Extraction" ensures we catch both architecture and bit-twiddling hacks.|
|**Scalability**|9/10|Parallel agents on Step 2 remove the bottleneck of long context windows.|