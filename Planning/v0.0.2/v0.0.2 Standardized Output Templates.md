# Standardized Output Templates

**Version:** 0.0.2

**Philosophy:** One Concept = One File.

Use these templates to enforce the "Atomic" structure. When the AI generates insights, ask it to strictly follow this YAML-frontmatter style. This allows you to programmatically index your library later.

## Template: The Pattern Atom (`pattern_[name].md`)

_This file contains BOTH the human context and the AI rule. This is the single source of truth for one specific piece of knowledge._

````
---
id: [unique-id-e.g-pattern-react-event-buffer]
type: [pattern | trick | anti-pattern]
source_repo: [Repo Name]
tags: [react, performance, websockets, optimization]
complexity: [High]
---

# üß† Human Insight: [Name of the Pattern]

### The Problem
*Why did they need this?*
> Standard event listeners were causing UI lag during high-frequency bursts.

### The Solution (The "Trick")
They implemented a **Ring Buffer** that collects events and flushes them to the UI in batches using `requestAnimationFrame`.

### When to use this?
* ‚úÖ When handling > 50 websocket events/sec.
* ‚ùå Do not use for simple CRUD forms (over-engineering).

---

# ü§ñ AI Instruction (Cursor Rule)

*Copy the block below into your project's `.cursorrules` or context to apply this pattern.*

#### Rule: [Name of Pattern]
**Trigger:** When implementing high-frequency event listeners.

**Guidelines:**
1.  **Do not** attach listeners directly to state setters.
2.  **Must** implement a buffering class similar to the reference implementation.
3.  **Must** use `requestAnimationFrame` for the flush trigger.

**Reference Implementation (Skeleton):**
```typescript
class EventBuffer<T> {
  private buffer: T[] = [];
  push(event: T) {
    this.buffer.push(event);
    if (this.buffer.length > THRESHOLD) this.flush();
  }
  // ... rest of logic
}
````

````

---

## Template: The "Lesson Learned" Card (`lesson_[name].md`)
*For broader architectural decisions or mistakes to avoid.*

```markdown
---
id: lesson-no-barrel-files
type: principle
source_repo: [Repo Name]
tags: [architecture, build-speed, webpack]
---

# üõë Principle: Avoid Barrel Files in Core

### The Insight
The repo explicitly bans `index.ts` exports (barrel files) in the `core/` directory.

### The "Why" (From Issues/PRs)
Analysis of PR #452 shows that barrel files broke tree-shaking and increased bundle size by 30%.

### AI Rule enforcement
> **Rule:** Do not create `index.ts` files that re-export modules in `src/core`. Import directly from the specific file.
````